/*! Pretty Gist - v0.1.5 *
* https://github.com/JoePettersson/pretty-gist *
* Copyright (c) 2012 Joe Pettersson *
* Licensed under the MIT License */
(function(a,b,c,d){function g(b,c){this.element=b,this.options=a.extend({},f,c),this.init()}"use strict";var e="prettyGist",f={showHeader:!0,extendedHeader:!0,showFooter:!0};g.prototype={init:function(){var b=a(this.element).attr("id").substring(5),c=this.options,d=this.element,e=this.placeholder(d,b),f=this.model(b,function(e){a("#placeholder-for-"+b).replaceWith(g.prototype.layout(e,d,c)),c.showFooter===!0&&g.prototype.bind(e.data.id),typeof hljs!="undefined"&&(hljs.initHighlightingOnLoad(),a(".pg-pretty-gist").addClass("pg-hljs"))})},placeholder:function(b,c){var d='<div class="pretty-gist-placeholder" id="placeholder-for-'+c+'"></div>';a(d).insertAfter(b)},model:function(b,c){a.getJSON("https://api.github.com/gists/"+b+"?callback=?",function(a){c(a)})},layout:function(b,c,d){var e="";return e+='<div class="pg-pretty-gist" id="pg-pretty-gist-'+b.data.id+'">',d.showHeader===!0&&(e+='<div class="pg-header pg-clear">',d.extendedHeader===!0?(e+='<div class="pg-logo"><a href="https://github.com/">Github</a></div>',e+='<div class="pg-user"><a href="https://github.com/'+b.data.user.login+'" class="pg-github-user">',typeof b.data.user.avatar_url!="undefined"&&b.data.user.avatar_url.length>0?e+='<img src="'+b.data.user.avatar_url+'" alt="Avatar" width="34px" height="34px" />':e+='<img src="https://a248.e.akamai.net/assets.github.com/images/gravatars/gravatar-140.png" alt="Avatar" width="34px" height="34px" />',e+="</div>",e+='<div class="pg-github-user-data">',e+='<h2><a href="https://gist.github.com/gists/'+b.data.id+'">'+b.data.description+"</a></h2>",e+='<h3><a href="https://github.com/'+b.data.user.login+'">'+b.data.user.login+"</a></h3>",e+="</div>"):e+='<h2 class="pg-single"><a href="https://gist.github.com/gists/'+b.data.id+'">'+b.data.description+"</a></h2>",e+="</div>"),e+='<div class="pg-code-container"><ol>',a.each(a(c).find(".line"),function(b){e+='<li class="pg-pretty-line" id="pg-pretty-line-'+b+'"><pre><code>'+a(this).html()+"</pre></code></li>"}),e+="</ol></div>",d.showFooter===!0&&(e+='<div class="pg-footer pg-clear">',e+='<a href="https://gist.github.com/gists/'+b.data.id+'/download" class="pg-button pg-left">Download Gist</a>',e+='<a href="#" class="pg-button pg-middle pg-show-embed" data-embed="https://gist.github.com/'+b.data.id+'.js">Embed Gist</a>',e+='<a href="#" class="pg-button pg-right pg-show-clone-url" data-clone-url="git://gist.github.com/'+b.data.id+'.git">Clone Gist</a>',e+='<a href="#" class="pg-button pg-single pg-show-plugin-info">Info</a>',e+="</div>"),e+="</div>",e},bind:function(b){a("#pg-pretty-gist-"+b+" .pg-show-embed").click(function(c){c.preventDefault();var d="&lt;script src=&quot;"+a(this).attr("data-embed")+"&quot;>&lt;/script>",e="Embed code:";g.prototype.modal(b,e,d)}),a("#pg-pretty-gist-"+b+" .pg-show-clone-url").click(function(c){c.preventDefault();var d=a(this).attr("data-clone-url"),e="Clone url:";g.prototype.modal(b,e,d)}),a("#pg-pretty-gist-"+b+" .pg-show-plugin-info").click(function(a){a.preventDefault();var c='Pretty Gist by <a href="http://www.joepettersson.com/pretty-gist/">Joe Pettersson</a><br />A plugin to make prettier and more functional embedded Github Gists';g.prototype.modal(b,c)})},modal:function(b,c,d){a("#pg-pretty-gist-"+b).find(".pg-gist-modal").remove();var e="",f=a("#pg-pretty-gist-"+b).outerWidth()-2,g=a("#pg-pretty-gist-"+b+" .pg-code-container").outerHeight()/2-23;e+='<div class="pg-gist-modal" style="width: '+f+"px; padding: "+g+'px 0px;">',e+="<p>"+c+"</p>",typeof d!="undefined"&&(e+='<input type="text" value="'+d+'" class="pg-gist-input" name="embed-url" />'),e+="</div>",a(e).insertBefore("#pg-pretty-gist-"+b+" .pg-code-container"),a("#pg-pretty-gist-"+b+" .pg-gist-modal").click(function(c){a("#pretty-gist-"+b).find(".pg-gist-modal").remove()})}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})}})(jQuery,window,document);